---
date created: 2022-03-16 14:13
date modified: 2022-03-28 00:39
title: DNS
---
## DNS
- 由分层的 DNS 服务器实现的分布式数据库。
- 使主机能够查询分布式数据库的应用层协议
- 即使用 TCP，也使用 UDP
	- 区域传送使用 TCP，辅域名服务器会定时（一般时 3 小时）向主域名服务器进行查询以便了解数据是否有变动。如有变动，则会执行一次区域传送，进行数据同步。区域传送将使用 TCP 而不是 UDP ，因为数据同步传送的数据量比一个请求和应答的数据量要多得多。TCP 是可靠的连接能保证数据的准确性
	- 域名解析使用 UDP，客户端向 DNS 服务器查询域名，一般返回的内容都不超过 512 字节；不用经过 TCP 三次握手，DNS 服务器负载更低

### DNS 提供的服务
- 主机名到 IP 地址转换
- 主机别名
- 邮件服务器别名
- 负载分配：一组 IP 地址和一个主机名关联，在进行 DNS 解析时，可以通过负载均衡算法分配地址。


### DNS 服务器类型
- 根 DNS 服务器：如 www.baidu.com，真实域名为 www.baidu.com.root，但是一般 root 都省略
- 顶级域 DNS 服务器 (Top Level Domain)：如 .com,.net,.cn 后缀
- 次级域名：如 baidu.com，中的 baidu
- 三级域名：如 www.baidu.com 中 www

### DNS 解析顺序
1. 本地 DNS 缓存
2. hosts 文件
3. 访问本地 DNS 服务器
4. 从根 DNS 服务器查到顶级 DNS 服务器
5. 从顶级 DNS 服务器查到次级 DNS 服务器
6. 从次级 DNS 服务器查主机名的 IP 地址

### DNS 记录类型
- A：地址记录，返回域名指向的 IP 地址
- NS：域名服务器记录，返回下一级域名信息的服务器地址
- MX：邮件记录，返回接受电子邮件的服务器地址
- CNAME：规范名称记录，返回另一个域名，即当前查询域名是另一个域名的跳转
- PTR：逆向查询记录，只用于从 IP 地址查询域名