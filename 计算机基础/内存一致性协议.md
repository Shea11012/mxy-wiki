---
aliases: ["mesi"]
tags: ["mesi", "内存"]
date created: 2022-12-03 00:41
date modified: 2022-12-03 01:05
---

在多核系统中，多个进程 (线程) 为了使用同一个内存块，而引起的内存问题被称为内存一致性问题。

会导致的主要问题是：

- 共享可写数据
- 进程 (线程) 调度
- 由于 IO 导致的不一致

## MESI Protocol

**MESI Protocol**：使用最为广泛的内存一致性协议，每个 Cache line 具有以下状态：

- Modified：表示当前 Cache line 仅在当前的 Cache 中且是脏数据，数据与主存数据不一致，在其他 CPU 读取该数据时，需要先写回主存
- Exclusive：表示当前 Cache line 仅在当前的 Cache 中且是干净的，数据与主存数据一致
- Shared：表示当前 Cache line 可能存在其他的 Cache 上
- Invalid：表示当前 Cache line 无效