---
date created: 2022-09-25 16:39
date modified: 2022-09-25 16:50
title: 常见面试问题
---
## 为什么是三次握手，而不是两次或四次
### 三次握手才可以防止重复历史连接的初始化
当客户端发起一个 SYN1（seq=90）时，因为网络阻塞的缘故，客户端宕机重启重新发起了另一个 SYN2（seq=100），SYN1 先到达服务端时，返回的 ACK（90+1），客户端比较与预期的 100+1 不匹配，会发送一个 RST。

如果是两次握手，就无法发起阻止历史连接，就会导致服务的的资源浪费。

### 三次握手才可以同步双方的初始序列号
TCP连接维护一个序列号，作用是：
- 接收方可以去除重复的数据
- 接收方可以根据数据包的序列号按序接受
- 可以标识发送出去的数据包中，哪些是已经被对方接受到的

四次握手也可以实现同步序列号，因为服务端的SYN和ACk可以合并到一起，就优化成了3次握手

### 三次握手才可以避免资源浪费
