---
date created: 2021-11-30 21:22
date modified: 2022-03-29 15:11
title: 内存对齐
---
```go
type T struct {
    a int8 // 1 byte
    b int64 // 8 byte
    c int32 // 4 byte
    d int16 // 2 byte
}
```

>内存对齐，取成员内最大的对齐边界，8
>
>结构体的存储地址必须是对齐边界的倍数，addr % 8 = 0，找到该地址将该地址看成相对地址，0
>
>a 占 1 byte，0%1=0 ；起始地址 0，结束地址 0；
>
>b 占 8 byte，1%8=1；因为不等于 0，所以需要对齐，从 a 往后移动 7 byte，地址 8；8%8=0，所以 b 起始地址从 8 开始；地址 8，结束地址 15；
>
>c 占 4 byte，16%4=0，起始地址 16，结束地址 19；
>
>d 占 2 byte，20%2=0，起始地址 20，结束地址 21；
>
>该结构体整体占用字节数 22 % 8 = 6；需要向后扩充 2 byte，最终该结构体的大小 24 byte。

