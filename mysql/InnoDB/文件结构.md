---
tags: []
date created: 2023-03-29 18:31
date modified: 2023-03-29 23:20
---
表空间由段（segment）、区（extent）、页（page）、行（row）组成。
![](attachments/Pasted%20image%2020230329183155.png)

## 行

数据库表中的记录都是按行进行存放，每行记录根据不同的格式，有不同的存储结构

## 页

因为按行读取效率低，因此 InnoDB 数据是按页来读写的
默认每个页大小为 16KB
页的类型很多，常见的有数据页、undo 日志页、溢出页等

## 区

在分配空间时不按照页为单位分配，而是按照区为单位分配。每个区的大小为 1MB，对于 16KB 的页来说，连续的 64 个页会被划为一个区，使得链表中相邻的页物理位置也相邻，这样就能使用顺序 IO

## 段

段由多个区组成，一般分为数据段、索引段和回滚段等
- 索引段：存放 B+ 树的非叶子节点的区集合
- 数据段：存放 B+ 树叶子节点的区集合
- 回滚段：存放回滚数据的区集合

## 行格式

- Redundant：MySQL5.0 版本之前的行格式，弃用
- Compact：紧凑的行格式，5.1 之后，行格式默认为 Compact
- Dynamic 和 Compressed：都是紧凑格式，因为都是基于 Compact 改进，从 5.7 之后默认为 Dynamic

### Compact 格式

![](attachments/Pasted%20image%2020230329185340.png)

## MySQL 行溢出后，怎么处理

MySQL 一个页的大小为 16KB，当一个数据页存不下一条数据时，会将溢出的数据放到溢出页